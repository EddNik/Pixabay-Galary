{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/styles.css';\n\nexport const iziToastOption = {\n  timeout: 5000,\n  theme: 'dark',\n  messageColor: 'white',\n  icon: 'custom-svg-icon',\n  iconColor: '#FFFFFF',\n  closeOnClick: true,\n  backgroundColor: '#ef4040',\n  position: 'topRight',\n};\n\nexport default async function getImagesByQuery(query, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '51407519-422ec1314326ee48566ae1dd4',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    iziToastOption.message = `${error.message} : ${error.code}`;\n    iziToast.error(iziToastOption);\n    setTimeout(() => {\n      hideLoader();\n    }, 500);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport '../../node_modules/simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nexport const btnLoader = document.querySelector('.load-more');\n\nexport async function createGallery(images) {\n  const listImages = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <div class=\"gallery-options-container\">\n          <div class=\"gallery-options\">\n            <h3 class=\"count-option\">Likes</h3>\n            <p>${likes}</p>\n          </div>\n          <div class=\"gallery-options\">\n            <h3 class=\"count-option\">Views</h3>\n            <p>${views}</p>\n          </div>\n          <div class=\"gallery-options\">\n            <h3 class=\"count-option\">Comments</h3>\n            <p>${comments}</p>\n          </div>\n          <div class=\"gallery-options\">\n            <h3 class=\"count-option\">Downloads</h3>\n            <p>${downloads}</p>\n          </div>\n         </div>\n        </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', listImages);\n\n  new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    overlayOpacity: 0.95,\n  }).refresh();\n}\n\nexport function showLoader(loader) {\n  loader.classList.add('loader');\n  loader.textContent = 'Loading';\n}\n\nexport function hideLoader(loader) {\n  loader.classList.remove('loader');\n  loader.textContent = '';\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoadMoreButton() {\n  btnLoader.classList.remove('btn-loader');\n}\n\nexport function hideLoadMoreButton() {\n  btnLoader.classList.add('btn-loader');\n}\n","import getImagesByQuery from './js/pixabay-api';\nimport { iziToastOption } from './js/pixabay-api';\nimport {\n  createGallery,\n  hideLoader,\n  showLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  btnLoader,\n} from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\n\nlet page = 1;\nlet query = '';\nlet total_pages = 0;\nconst per_page = 15;\nlet prevQuery = '';\n\nconst loader = document.querySelector('.js-loader');\nconst loaderMore = document.querySelector('.js-loader-more');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  clearGallery();\n\n  try {\n    query = form.elements['search-text'].value.trim();\n    showLoader(loader);\n\n    // reset number of page when type a new word\n    if (query !== prevQuery) {\n      page = 1;\n    }\n    prevQuery = query;\n    let { totalHits, hits } = await getImagesByQuery(query, page);\n    total_pages = Math.ceil(totalHits / per_page);\n\n    if (Array.isArray(hits) && hits.length === 0) {\n      hideLoadMoreButton();\n      page = 1;\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n\n    //Перевірка кінця колекції\n    if (page > total_pages) {\n      hideLoadMoreButton();\n      page = 1;\n      form.reset();\n      throw new Error('We are sorry, there are no more posts to load');\n    }\n\n    if (!Boolean(query)) {\n      hideLoadMoreButton();\n      throw new Error('Sorry, this name images is empty. Please try again!');\n    }\n\n    createGallery(hits);\n    hideLoader(loader);\n    showLoadMoreButton();\n  } catch (error) {\n    iziToastOption.message = error.message;\n    iziToast.show(iziToastOption);\n    setTimeout(() => {\n      hideLoader(loader);\n    }, 500);\n  }\n});\n\nbtnLoader.addEventListener('click', async event => {\n  event.preventDefault();\n  showLoader(loaderMore);\n  page += 1;\n\n  try {\n    const { hits } = await getImagesByQuery(query, page);\n\n    if (page > total_pages) {\n      hideLoadMoreButton();\n      page = 0;\n      form.reset();\n      throw new Error('We are sorry, there are no more posts to load');\n    }\n\n    createGallery(hits);\n    hideLoader(loaderMore);\n  } catch (error) {\n    iziToastOption.message = error.message;\n    iziToast.show(iziToastOption);\n    setTimeout(() => {\n      hideLoader(loaderMore);\n    }, 500);\n  }\n});\n"],"names":["iziToastOption","getImagesByQuery","query","page","axios","error","iziToast","gallery","btnLoader","createGallery","images","listImages","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","showLoader","loader","hideLoader","clearGallery","showLoadMoreButton","hideLoadMoreButton","form","total_pages","per_page","prevQuery","loaderMore","event","totalHits","hits"],"mappings":"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"}